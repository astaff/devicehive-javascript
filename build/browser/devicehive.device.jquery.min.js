!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.JqDHDevice=t()}(this,function(){var e=function(e){"use strict";var t=function(t,r,n){return function(){var o=e.Deferred(),i=Array.prototype.slice.call(arguments);return r="undefined"!=typeof r?r:i.length,i.splice(r,0,function(e,t){e?o.reject(e):o.resolve(n?n(t):t)}),e.extend(!0,t.apply(this,i),o.promise())}};return{toDeferredLast:function(e,r){return t(e,void 0,r)},toDeferredFirst:function(e,r){return t(e,0,r)}}}(jQuery),t=function(t){"use strict";var r=function(e,t,r){DHDevice.call(this,e,t,r)};return t.extend(r.prototype,DHDevice.prototype,{getDevice:e.toDeferredLast(DHDevice.prototype.getDevice),registerDevice:e.toDeferredLast(DHDevice.prototype.registerDevice),updateDevice:e.toDeferredLast(DHDevice.prototype.updateDevice),subscribe:function(){var t=this;return e.toDeferredFirst(DHDevice.prototype.subscribe,function(r){return r._handleMessage=function(n,o){t._populateCmd(o);var i=o.update;o.update=e.toDeferredLast(i),r._handleMessageOld(o)},r}).apply(this,arguments)},unsubscribe:e.toDeferredLast(DHDevice.prototype.unsubscribe),sendNotification:e.toDeferredLast(DHDevice.prototype.sendNotification),openChannel:e.toDeferredFirst(DHDevice.prototype.openChannel),closeChannel:e.toDeferredLast(DHDevice.prototype.closeChannel)}),t.dhDevice=function(e,t,n){return new r(e,t,n)}}(jQuery);return t});